<!doctype html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<!-- Tailwind (Play CDN) -->
	<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
	<title>Consulta de Citas | Clínica VIDA</title>
</head>

<body class="min-h-screen bg-slate-50 text-slate-900">
	<div class="mx-auto max-w-6xl px-4 py-8">
		<header class="flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
			<div class="space-y-1">
				<div class="inline-flex items-center gap-2">
					<div class="h-10 w-10 rounded-xl bg-sky-100 grid place-items-center">
						<span class="text-sky-700 text-xl font-bold">+</span>
					</div>
					<div>
						<h1 class="text-2xl font-bold tracking-tight text-slate-900">Consulta de Citas</h1>
						<p class="text-slate-600">Listado de citas registradas: fecha, paciente, médico y costo.</p>
					</div>
				</div>
			</div>

			<a th:href="@{/citas/consulta}"
				class="inline-flex items-center justify-center rounded-lg bg-sky-600 px-4 py-2 text-sm font-semibold text-white hover:bg-sky-700">
				Recargar
			</a>
		</header>

		<!-- Mensajes -->
		<div class="mt-6 space-y-3">
			<div th:if="${mensajeOk != null and !#strings.isEmpty(mensajeOk)}"
				class="rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-emerald-800">
				<p class="font-semibold" th:text="${mensajeOk}">Operación exitosa.</p>
			</div>

			<div th:if="${mensajeError != null and !#strings.isEmpty(mensajeError)}"
				class="rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-rose-800">
				<p class="font-semibold" th:text="${mensajeError}">Ocurrió un error.</p>
			</div>
		</div>

		<section class="mt-6 overflow-hidden rounded-2xl border border-slate-300 bg-white shadow-sm">
			<div class="flex items-center justify-between gap-3 border-b border-slate-300 px-5 py-4 bg-slate-100">
				<h2 class="text-lg font-semibold text-slate-900">Citas registradas</h2>
				<span class="text-xs font-semibold text-slate-700"
					th:text="${citas != null ? 'Total: ' + #lists.size(citas) : 'Total: 0'}">Total: 0</span>
			</div>

			<div class="overflow-x-auto">
				<table class="min-w-full text-sm">
					<thead class="bg-slate-800">
						<tr class="text-left text-white">
							<th class="px-5 py-3 font-semibold">Fecha</th>
							<th class="px-5 py-3 font-semibold">Paciente</th>
							<th class="px-5 py-3 font-semibold">Médico</th>
							<th class="px-5 py-3 font-semibold">Costo</th>
							<th class="px-5 py-3 font-semibold text-right">Acción</th>
						</tr>
					</thead>

					<tbody class="divide-y divide-slate-200">
						<tr th:if="${citas == null or #lists.isEmpty(citas)}">
							<td colspan="5" class="px-5 py-10 text-center text-slate-600 font-medium">
								No hay citas registradas.
							</td>
						</tr>

						<tr th:each="cita, st : ${citas}" th:class="${st.even} ? 'bg-white' : 'bg-slate-50'"
							class="hover:bg-sky-50">
							<td class="px-5 py-3 text-slate-900 font-medium"
								th:text="${cita.fecha != null ? cita.fecha.toString().replace('T',' ') : ''}">
								2026-02-14 10:30
							</td>

							<td class="px-5 py-3 text-slate-800"
								th:text="${cita.paciente != null ? cita.paciente.nombres : ''}">
								Juan Pérez
							</td>

							<td class="px-5 py-3 text-slate-800"
								th:text="${cita.medico != null ? cita.medico.nombres : ''}">
								Dra. García
							</td>

							<td class="px-5 py-3 text-slate-900 font-semibold" th:text="${cita.costo}">
								50.00
							</td>

							<td class="px-5 py-3 text-right">
								<a th:href="@{/citas/editar/{id}(id=${cita.idCita})}"
									class="inline-flex items-center justify-center rounded-lg bg-teal-600 px-3 py-2 text-xs font-semibold text-white hover:bg-teal-700">
									Editar
								</a>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</section>

		<footer class="mt-8 text-xs text-slate-500">
			Clínica VIDA • Módulo de Gestión de Citas
		</footer>
	</div>
</body>

</html>